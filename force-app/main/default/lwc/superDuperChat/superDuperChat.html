<template>
    <c-super-duper-chat-miaw 
        onendusermessage={handleEndUserMessage}
        onagentmessage={handleAgentMessage}>
    </c-super-duper-chat-miaw>

    <lightning-card title="Super Duper Chat" icon-name="utility:chat">
        <div slot="actions">
            {language}
            {recordId}
        </div>

        <div class="height-vh slds-scrollable_y">
            <section class="slds-chat">
                <ul class="slds-chat-list">

                    <template for:each={messages} for:item="message">
                        <c-super-duper-chat-message 
                            key={message.id} 
                            message={message.text} 
                            user={message.user} 
                            time={message.time}
                            type={message.type}
                            language={language}
                            onlanguagechange={handleLanguageChange}>
                        </c-super-duper-chat-message>
                    </template>

                </ul>
            </section>
        </div>

        <footer slot="footer">
            <div class="slds-grid">
                <div class="slds-col slds-size_11-of-12">
                    <lightning-input variant="label-hidden" type="text" placeholder="Reply to message (translated)" lwc:ref="messageInput"></lightning-input>
                </div>
                <div class="slds-col slds-size_1-of-12">
                    <lightning-button label="Send" onclick={handleSendAgentMessage}></lightning-button>
                </div>
            </div>
        </footer>

    </lightning-card>

</template>