<template>
    <c-super-duper-chat-miaw record-id={recordId} onendusermessage={handleEndUserMessage}
        onagentmessage={handleAgentMessage}>
    </c-super-duper-chat-miaw>

    <lightning-card title="Translated Conversation" icon-name="utility:chat" class="slds-has-bottom-magnet">

        <div slot="actions">
            {recordId} {language}
        </div>

        <div class="height-half slds-scrollable_y">
            <section class="slds-chat">
                <ul class="slds-chat-list">

                    <template for:each={messages} for:item="message">
                        <c-super-duper-chat-message key={message.id} message={message.text} user={message.user}
                            time={message.time} type={message.type} language={language}
                            onlanguagechange={handleLanguageChange}>
                        </c-super-duper-chat-message>
                    </template>

                </ul>
            </section>
            <div lwc:ref="scrollToBottom"></div>
        </div>

    </lightning-card>

    <!-- <lightning-card title="Translated Input" icon-name="utility:textbox" class="slds-has-top-magnet"> -->
    <lightning-card class="slds-has-top-magnet">

        <div class="slds-p-around_small">
            <c-super-duper-chat-input language={language} onsendagentmessage={handleSendAgentMessage}>
            </c-super-duper-chat-input>
        </div>

    </lightning-card>

</template>